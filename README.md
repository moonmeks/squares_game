# Игра "Квадраты" (Squares Game)

Реализация игры "Квадраты" с консольным интерфейсом, веб-сервером и веб-клиентом.

## Описание игры

Игра происходит на поле N×N клеток. Два игрока по очереди ставят фишки своего цвета (белые 'W' и черные 'B'). Побеждает игрок, который первым выстроит квадрат из четырёх своих фишек. Квадрат может быть ориентирован произвольно относительно доски. Если все клетки заполнены, но никто не построил квадрат, объявляется ничья.

## Структура проекта

- `cli.js` - консольная версия (Задание 1)
- `engine.js` - игровой движок с логикой игры
- `server.js` - веб-сервер (Задание 2) 
- `app.js` - веб-приложение (Задание 3)
- `index.html` - HTML-страница веб-клиента
- `style.css` - стили веб-клиента
- `package.json` - конфигурация npm
- `README.md` - документация

## Установка и запуск

### Предварительные требования
- Node.js
- npm

### Установка зависимостей
```bash
npm install
```

### Запуск консольной версии (Задание 1)
```bash
npm run cli
```
Доступные команды:

- GAME N, TYPE1 C1, TYPE2 C2 - начать новую игру
- N - размер доски (целое число > 2)
- TYPE1, TYPE2 - тип игрока: user или comp
- C1, C2 - цвет фишек: W (белые) или B (черные)
- MOVE X, Y - сделать ход (только для пользователя в свой ход)
- HELP - показать справку по командам
- EXIT - выйти из программы

Пример игры:

> GAME 6, user W, comp B
New game started
   0  1  2  3  4  5
 0 .  .  .  .  .  .
 1 .  .  .  .  .  .
 2 .  .  .  .  .  .
 3 .  .  .  .  .  .
 4 .  .  .  .  .  .
 5 .  .  .  .  .  .
> MOVE 0, 0
   0  1  2  3  4  5
 0 W  .  .  .  .  .
 1 .  .  .  .  .  .
 2 .  .  .  .  .  .
 3 .  .  .  .  .  .
 4 .  .  .  .  .  .
 5 .  .  .  .  .  .
B (2, 2)
   0  1  2  3  4  5
 0 W  .  .  .  .  .
 1 .  .  .  .  .  .
 2 .  .  B  .  .  .
 3 .  .  .  .  .  .
 4 .  .  .  .  .  .
 5 .  .  .  .  .  .

### Запуск веб-сервера (Задания 2)
```bash
npm start
```
Создать игру:
```bash
curl -X POST http://localhost:3000/newgame \
  -H "Content-Type: application/json" \
  -d "{\"n\":6,\"players\":[{\"type\":\"user\",\"color\":\"W\"},{\"type\":\"comp\",\"color\":\"B\"}]}"
```  
Сделать ход:
```bash
curl -X POST http://localhost:3000/move \
  -H "Content-Type: application/json" \
  -d "{\"x\":1,\"y\":1}"
```
Пример результата:
После создания игры:
{
  "n": 6,
  "board": [
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."]
  ],
  "next": 0,
  "players": [
    {
      "type": "user",
      "color": "W"
    },
    {
      "type": "comp",
      "color": "B"
    }
  ],
  "finished": false,
  "winner": null
}

После хода (0,0):
{
  "n": 6,
  "board": [
    ["W", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", "B", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."]
  ],
  "next": 0,
  "players": [
    {
      "type": "user",
      "color": "W"
    },
    {
      "type": "comp",
      "color": "B"
    }
  ],
  "finished": false,
  "winner": null
}

После хода (1,1):
{
  "n": 6,
  "board": [
    ["W", ".", ".", ".", ".", "."],
    [".", "W", ".", ".", ".", "."],
    [".", ".", "B", "B", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "."]
  ],
  "next": 0,
  "players": [
    {
      "type": "user",
      "color": "W"
    },
    {
      "type": "comp",
      "color": "B"
    }
  ],
  "finished": false,
  "winner": null
}

### Запуск веб-приложения (Задания 3)
Запустите сервер:
```bash
npm start
```
Откройте в браузере:
http://localhost:3000

Использование:

- Выберите размер доски N
- Выберите тип игроков (User/Computer) для белых и черных фишек
- Нажмите "New Game" для начала игры
- Кликайте по клеткам для совершения ходов (если играете за пользователя)

### Алгоритм игры
Движок игры включает:
- Проверку образования квадратов для любого цвета
- Алгоритм выбора хода для компьютера с приоритетами:
    - Выигрышный ход
    - Блокировка выигрышного хода противника
    - Выбор хода ближе к центру поля

### Технологии
Backend: Node.js, Express.js
Frontend: JavaScript, HTML5, CSS3
Архитектура: Модульная структура с разделением движка и интерфейсов
